Program
  [ Function
      { fId = Id "factorial"
      , fIds = [ Id "n" ]
      , fBlocks =
          [ Block
              { bId = 0
              , bInstrs =
                  [ ILoad (Reg 1) (Id "n")
                  , IConst (Reg 2) 0
                  , IArith OpEq (Reg 3) (Reg 1) (Reg 2)
                  , IStore (Id "cond") (Reg 3)
                  , ILoad (Reg 4) (Id "cond")
                  , IBranch (Reg 4) 1 2
                  ]
              }
          , Block
              { bId = 1
              , bInstrs =
                  [ IConst (Reg 5) 1
                  , IStore (Id "tmp") (Reg 5)
                  , ILoad (Reg 6) (Id "tmp")
                  , IReturn (Reg 6)
                  ]
              }
          , Block
              { bId = 2
              , bInstrs =
                  [ ILoad (Reg 7) (Id "n")
                  , IConst (Reg 8) 1
                  , IArith OpSub (Reg 9) (Reg 7) (Reg 8)
                  , IStore (Id "tmp") (Reg 9)
                  , ILoad (Reg 10) (Id "tmp")
                  , ICall (Reg 11) (Id "factorial") [ Reg 10 ]
                  , ILoad (Reg 12) (Id "n")
                  , IArith OpMul (Reg 13) (Reg 11) (Reg 12)
                  , IStore (Id "tmp") (Reg 13)
                  , ILoad (Reg 14) (Id "tmp")
                  , IReturn (Reg 14)
                  ]
              }
          ]
      }
  , Function
      { fId = Id "main"
      , fIds = [ Id "n" ]
      , fBlocks =
          [ Block
              { bId = 0
              , bInstrs =
                  [ ILoad (Reg 1) (Id "n")
                  , ICall (Reg 2) (Id "factorial") [ Reg 1 ]
                  , IStore (Id "tmp") (Reg 2)
                  , ILoad (Reg 3) (Id "tmp")
                  , IReturn (Reg 3)
                  ]
              }
          ]
      }
  ]